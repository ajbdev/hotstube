<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>HOTS Tube</title>
  </head>
  <body>
    <div id="root"></div>
    <script>
      var bundleBuild = './build/bundle.js';
      var currentScript = document.currentScript;

      if(typeof process !== 'undefined' && process.env.ENVIRONMENT === 'DEV') {
        bundlePath = 'http://localhost:8080/build/bundle.js';
        var bundleScript = document.createElement('script');
        bundleScript.src =  bundlePath;
      

        bundleScript.addEventListener('error',function(event) {
          var buildBundleScript = document.createElement('script');
          buildBundleScript.src = bundleBuild;
          
          currentScript.parentNode.insertBefore(buildBundleScript, currentScript);
        })
      } else {
        bundleScript = document.createElement('script');
        bundleScript.src = bundleBuild;
      }

      currentScript.parentNode.insertBefore(bundleScript, currentScript);
	</script>
  </body>
  <script>
    require('./game_watcher.js')
  </script>
</html>
